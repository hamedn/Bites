(function(){angular.module("ionic.rating",[]).constant("ratingConfig",{max:5}).controller("RatingController",function($scope,$attrs,ratingConfig){var ngModelCtrl;return ngModelCtrl={$setViewValue:angular.noop},this.init=function(ngModelCtrl_){var max;return ngModelCtrl=ngModelCtrl_,ngModelCtrl.$render=this.render,max=angular.isDefined($attrs.max)?$scope.$parent.$eval($attrs.max):ratingConfig.max,$scope.range=this.buildTemplateObjects(ngModelCtrl.$modelValue,max)},this.buildTemplateObjects=function(stateValue,max){var j,states=[];for(j=0;max>j;j++)stateValue>j&&j+1>stateValue?states[j]=2:stateValue>j?states[j]=1:states[j]=0;return states},$scope.rate=function(value){return!$scope.readonly&&value>=0&&value<=$scope.range.length?(ngModelCtrl.$setViewValue(value),ngModelCtrl.$render()):void 0},$scope.onKeydown=function(evt){return/(37|38|39|40)/.test(evt.which)?(evt.preventDefault(),evt.stopPropagation(),$scope.rate($scope.value+(38===evt.which||39===evt.which?{1:-1}:void 0))):void 0},this.render=function(){return $scope.value=ngModelCtrl.$viewValue},this}).directive("rating",function($timeout){return{restrict:"EA",require:["rating","ngModel"],scope:{readonly:"=?"},controller:"RatingController",template:'<ul class="rating" ng-keydown="onKeydown($event)"><li ng-repeat="r in range track by $index" ng-click="rate($index + 1)"><i class="icon" ng-class="value === undefined ? (r === 1 ? \'ion-ios-star\' : (r === 2 ? \'ion-ios-star-half\' : \'ion-ios-star-outline\')) : (value > $index ? \'ion-ios-star\' : \'ion-ios-star-outline\')"></i></li></ul>',replace:!0,link:function(scope,element,attrs,ctrls){var ngModelCtrl,ratingCtrl;ratingCtrl=ctrls[0],ngModelCtrl=ctrls[1],ngModelCtrl&&$timeout(function(){return ratingCtrl.init(ngModelCtrl)})}}})}).call(this);